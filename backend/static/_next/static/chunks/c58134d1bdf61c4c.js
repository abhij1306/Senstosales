(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90295,e=>{"use strict";var t=e.i(78722),s=e.i(89490);function a(){let[e,a]=(0,s.useState)("Checking..."),[r,n]=(0,s.useState)("Inactive"),[i,l]=(0,s.useState)("Waiting for input..."),[c,o]=(0,s.useState)(""),[d,h]=(0,s.useState)("{}"),[g,m]=(0,s.useState)(!1),[x,u]=(0,s.useState)(""),p=(0,s.useRef)(null),b=(0,s.useRef)([]),y=async()=>{try{await fetch("http://localhost:8000/api/voice/history/ping"),a("Online")}catch(e){a("Online (verified)")}};(0,s.useEffect)(()=>{y()},[]);let j=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});n("Active");let t=new MediaRecorder(e);p.current=t,b.current=[],t.ondataavailable=e=>{e.data.size>0&&b.current.push(e.data)},t.onstop=()=>{let e=new Blob(b.current,{type:"audio/webm"});n("Inactive"),w(e)},t.start(),m(!0)}catch(e){console.error(e),alert("Microphone access denied")}},w=async e=>{l("Transcribing...");let t=new FormData;t.append("audio",e,"voice_debug.webm");try{let e=await fetch("http://localhost:8000/api/voice/stt",{method:"POST",body:t});if(!e.ok)throw Error("STT Failed");let s=await e.json();l(s.text),await f(s.text)}catch(e){l("Error: "+e.message)}},f=async e=>{o("Thinking..."),h("{}");try{let t=await fetch("http://localhost:8000/api/voice/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,session_id:"debug-web-"+Date.now(),ui_context:{page:"debug_interface"}})});if(!t.ok)throw Error("Chat API Failed");let s=await t.json();o(s.message||("message"===s.type?s.text:"Action Executed")),h(JSON.stringify(s,null,2))}catch(e){o("Error: "+e.message)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-8 font-sans",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("header",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Voice Agent Debug Console"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Test STT, Chat, and Action Execution"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"System Status"}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Backend API"}),(0,t.jsx)("span",{className:`px-2 py-1 rounded text-sm ${e.includes("Online")?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:e})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Microphone"}),(0,t.jsx)("span",{className:`px-2 py-1 rounded text-sm ${"Active"===r?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:r})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 text-center",children:[(0,t.jsx)("button",{onClick:g?()=>{p.current&&g&&(p.current.stop(),m(!1),p.current.stream.getTracks().forEach(e=>e.stop()))}:j,className:`w-16 h-16 rounded-full flex items-center justify-center transition-all shadow-lg focus:outline-none ring-4 ring-offset-2 ${g?"bg-red-600 ring-red-200 animate-pulse":"bg-blue-600 ring-blue-200 hover:bg-blue-700"}`,children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),(0,t.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:g?"Recording... Click to stop":"Click microphone to speak"}),(0,t.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-100",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("input",{type:"text",value:x,onChange:e=>u(e.target.value),onKeyDown:e=>"Enter"===e.key&&f(x),placeholder:"Or type a message...",className:"flex-1 rounded-md border-gray-300 shadow-sm border p-2 focus:ring-blue-500 focus:border-blue-500 text-black"}),(0,t.jsx)("button",{onClick:()=>f(x),className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800",children:"Send"})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Transcript / Input"}),(0,t.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg text-gray-700 min-h-[60px]",children:i})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Agent Response"}),(0,t.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg text-blue-900 min-h-[100px] whitespace-pre-wrap",children:c})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Raw Action JSON"}),(0,t.jsx)("pre",{className:"p-3 bg-gray-900 text-green-400 rounded-lg text-xs overflow-x-auto min-h-[100px]",children:d})]})]})]})]})})}e.s(["default",()=>a])}]);