(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18391,e=>{"use strict";let t=(0,e.i(12063).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],18391)},48162,e=>{"use strict";let t=(0,e.i(12063).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],48162)},70658,e=>{"use strict";var t=e.i(78722),s=e.i(89490),r=e.i(48162);function a({url:e,filename:a,label:l="Download Excel",className:i="",variant:n="outline",size:d="md"}){let[o,c]=(0,s.useState)(!1),x=async t=>{t.preventDefault(),t.stopPropagation(),c(!0);try{let t=await fetch(e,{method:"GET"});if(!t.ok)throw Error("Download failed");let s=await t.blob(),r=window.URL.createObjectURL(s),l=document.createElement("a");l.href=r,l.download=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(r)}catch(e){console.error("Download Error:",e),alert("Failed to download file. Please try again.")}finally{c(!1)}},m="sm"===d?"w-3 h-3":"lg"===d?"w-5 h-5":"w-4 h-4";return(0,t.jsxs)("button",{onClick:x,disabled:o,className:`inline-flex items-center gap-2 font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${{sm:"px-2.5 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"}[d]} ${{primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200",outline:"border border-gray-300 text-text-primary bg-white hover:bg-gray-50",ghost:"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}[n]} ${i} ${o?"opacity-70 cursor-wait":""}`,children:[o?(0,t.jsxs)("svg",{className:`animate-spin -ml-1 mr-2 ${m} text-current`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,t.jsx)(r.Download,{className:m}),l]})}e.s(["default",()=>a])},15398,e=>{"use strict";let t=(0,e.i(12063).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],15398)},19015,e=>{"use strict";var t=e.i(78722),s=e.i(89490),r=e.i(69244),a=e.i(18391);let l=(0,e.i(12063).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);var i=e.i(46362),n=e.i(61071),d=e.i(15398),o=e.i(93889),c=e.i(70658);function x(e){if(0===e)return"Zero";let t=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],s=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],r=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"];function a(e){return 0===e?"":e<10?t[e]:e<20?r[e-10]:e<100?s[Math.floor(e/10)]+(e%10!=0?" "+t[e%10]:""):t[Math.floor(e/100)]+" Hundred"+(e%100!=0?" and "+a(e%100):"")}let l=Math.floor(e/1e7),i=Math.floor(e%1e7/1e5),n=Math.floor(e%1e5/1e3),d=e%1e3,o="";return l>0&&(o+=a(l)+" Crore "),i>0&&(o+=a(i)+" Lakh "),n>0&&(o+=a(n)+" Thousand "),d>0&&(o+=a(d)),o.trim()}function m(e){let t=Math.floor(e),s=Math.round((e-t)*100),r="Rupees "+x(t);return s>0&&(r+=" and Paise "+x(s)),r+=" Only"}let h=({label:e,value:s,onChange:r,type:a="text",placeholder:l="",required:i=!1,readOnly:n=!1})=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-[11px] uppercase tracking-wider font-semibold text-text-secondary mb-1",children:[e," ",i&&(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:a,value:s,onChange:r,readOnly:n,placeholder:l,className:`w-full px-3 py-2 text-sm border border-border rounded-lg focus:ring-1 focus:ring-primary focus:border-primary text-text-primary ${n?"bg-gray-50 text-text-secondary cursor-not-allowed":"bg-white"}`}),n&&(0,t.jsx)(d.Lock,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-text-secondary"})]})]});function p(){let e=(0,r.useRouter)(),d=(0,r.useSearchParams)().get("id"),[x,p]=(0,s.useState)("details"),[y,u]=(0,s.useState)(null),[b,j]=(0,s.useState)(!0);if((0,s.useEffect)(()=>{d&&(async()=>{try{let e=await o.api.getInvoiceDetail(decodeURIComponent(d));u(e),j(!1)}catch(e){console.error("Failed to load Invoice:",e),j(!1)}})()},[d]),b)return(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"text-primary font-medium",children:"Loading..."})});if(!y||!y.header)return(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"text-text-secondary",children:"Invoice not found"})});let{header:v,items:g=[],linked_dcs:f=[]}=y;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>e.back(),className:"text-text-secondary hover:text-text-primary transition-colors p-1",children:(0,t.jsx)(a.ArrowLeft,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-[20px] font-semibold text-text-primary flex items-center gap-3",children:["Invoice ",v.invoice_number,f&&f.length>0&&(0,t.jsxs)("span",{className:"text-[11px] font-medium text-text-secondary bg-gray-100 px-2 py-0.5 rounded border border-border flex items-center gap-1",children:["DC: ",f.map((s,r)=>(0,t.jsxs)("span",{className:"text-primary cursor-pointer hover:underline",onClick:()=>e.push(`/dc/${s.id||s.dc_number}`),children:[s.dc_number,r<f.length-1?",":""]},s.dc_number))]})]}),(0,t.jsxs)("p",{className:"text-[13px] text-text-secondary mt-0.5",children:["Issued Date: ",v.invoice_date]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(c.default,{url:`${o.API_BASE_URL}/api/invoice/${v.invoice_number}/download`,filename:`Invoice_${v.invoice_number}.xlsx`,label:"Download Excel"}),(0,t.jsxs)("button",{onClick:()=>window.print(),className:"px-4 py-2 text-sm font-medium text-text-secondary bg-white border border-border rounded-lg hover:bg-gray-50 flex items-center gap-2 transition-colors",children:[(0,t.jsx)(l,{className:"w-4 h-4"}),"Print Invoice"]})]})]}),(0,t.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,t.jsx)("div",{className:"border-b border-border",children:(0,t.jsxs)("div",{className:"flex gap-8 px-6",children:[(0,t.jsxs)("button",{onClick:()=>p("details"),className:`py-3 text-sm font-medium transition-colors relative ${"details"===x?"text-primary":"text-text-secondary hover:text-text-primary"}`,children:["Invoice and Despatch Details","details"===x&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]}),(0,t.jsxs)("button",{onClick:()=>p("transport"),className:`py-3 text-sm font-medium transition-colors relative ${"transport"===x?"text-primary":"text-text-secondary hover:text-text-primary"}`,children:["Transport and Payment","transport"===x&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]})]})}),(0,t.jsxs)("div",{className:"p-6",children:["details"===x&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(h,{label:"Invoice Number",value:v.invoice_number,readOnly:!0}),(0,t.jsx)(h,{label:"Invoice Date",value:v.invoice_date,readOnly:!0}),(0,t.jsx)(h,{label:"GEMC / E-way Bill",value:v.gemc_number,readOnly:!0}),(0,t.jsx)(h,{label:"Challan No",value:v.linked_dc_numbers,readOnly:!0}),(0,t.jsx)(h,{label:"Challan Date",value:v.dc_date||"",readOnly:!0}),(0,t.jsx)(h,{label:"Buyer's Order No",value:v.buyers_order_no,readOnly:!0}),(0,t.jsx)(h,{label:"Buyer's Order Date",value:v.buyers_order_date,readOnly:!0}),(0,t.jsx)(h,{label:"Despatch Doc No",value:v.despatch_doc_no,readOnly:!0}),(0,t.jsx)(h,{label:"SRV No",value:v.srv_no,readOnly:!0}),(0,t.jsx)(h,{label:"SRV Date",value:v.srv_date,readOnly:!0}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsx)(h,{label:"Buyer Name",value:v.buyer_name,readOnly:!0})}),(0,t.jsx)(h,{label:"Buyer GSTIN",value:v.buyer_gstin,readOnly:!0}),(0,t.jsx)(h,{label:"State",value:v.buyer_state,readOnly:!0}),(0,t.jsx)(h,{label:"Place of Supply",value:v.place_of_supply,readOnly:!0})]}),"transport"===x&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(h,{label:"Vehicle Number",value:v.vehicle_no,readOnly:!0}),(0,t.jsx)(h,{label:"LR Number",value:v.lr_no,readOnly:!0}),(0,t.jsx)(h,{label:"Transporter",value:v.transporter,readOnly:!0}),(0,t.jsx)(h,{label:"Destination",value:v.destination,readOnly:!0}),(0,t.jsx)(h,{label:"Terms of Delivery",value:v.terms_of_delivery,readOnly:!0}),(0,t.jsx)(h,{label:"Mode of Payment",value:v.mode_of_payment,readOnly:!0}),(0,t.jsx)(h,{label:"Payment Terms",value:v.payment_terms,readOnly:!0})]})]})]}),g&&g.length>0&&(0,t.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 border-b border-border bg-gray-50/30",children:(0,t.jsxs)("h3",{className:"text-[14px] font-semibold text-text-primary flex items-center gap-2",children:[(0,t.jsx)(i.Package,{className:"w-4 h-4 text-primary"})," Invoice Items"]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{className:"bg-gray-50/50 text-text-secondary font-semibold text-[11px] uppercase tracking-wider border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3",children:"Lot No"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Description"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right",children:"Qty"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Unit"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right",children:"Rate"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right",children:"Taxable Value"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right",children:"CGST (9%)"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right",children:"SGST (9%)"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right",children:"Total"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border/50 bg-white",children:g.map((e,s)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-text-primary",children:e.po_sl_no}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-text-primary",children:e.description}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-text-primary text-right",children:e.quantity}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-text-secondary",children:e.unit}),(0,t.jsxs)("td",{className:"px-4 py-3 text-sm text-text-primary text-right",children:["₹",e.rate?.toFixed(2)]}),(0,t.jsxs)("td",{className:"px-4 py-3 text-sm text-text-primary text-right font-medium",children:["₹",e.taxable_value?.toFixed(2)]}),(0,t.jsxs)("td",{className:"px-4 py-3 text-sm text-text-primary text-right",children:["₹",e.cgst_amount?.toFixed(2)]}),(0,t.jsxs)("td",{className:"px-4 py-3 text-sm text-text-primary text-right",children:["₹",e.sgst_amount?.toFixed(2)]}),(0,t.jsxs)("td",{className:"px-4 py-3 text-sm text-text-primary text-right font-semibold",children:["₹",e.total_amount?.toFixed(2)]})]},s))})]})})]}),(0,t.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 border-b border-border bg-gray-50/30",children:(0,t.jsx)("h3",{className:"text-[14px] font-semibold text-text-primary",children:"Tax Summary"})}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-border",children:[(0,t.jsx)("span",{className:"text-sm text-text-secondary",children:"Taxable Value"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-text-primary",children:["₹",v.taxable_value?.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-border",children:[(0,t.jsx)("span",{className:"text-sm text-text-secondary",children:"CGST (9%)"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-text-primary",children:["₹",v.cgst?.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-border",children:[(0,t.jsx)("span",{className:"text-sm text-text-secondary",children:"SGST (9%)"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-text-primary",children:["₹",v.sgst?.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t-2 border-primary",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-text-primary",children:"Total Invoice Value"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-primary",children:["₹",v.total_invoice_value?.toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg border border-border",children:[(0,t.jsx)("h4",{className:"text-xs font-semibold text-text-secondary uppercase",children:"Amount in Words"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"text-xs text-text-secondary",children:[(0,t.jsx)("span",{className:"font-semibold",children:"CGST (in words):"}),(0,t.jsx)("div",{className:"mt-1 text-text-primary",children:m(v.cgst||0)})]}),(0,t.jsxs)("div",{className:"text-xs text-text-secondary",children:[(0,t.jsx)("span",{className:"font-semibold",children:"SGST (in words):"}),(0,t.jsx)("div",{className:"mt-1 text-text-primary",children:m(v.sgst||0)})]}),(0,t.jsxs)("div",{className:"text-xs text-text-secondary",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Total (in words):"}),(0,t.jsx)("div",{className:"mt-1 text-text-primary",children:m(v.total_invoice_value||0)})]})]})]})]})})]}),f&&f.length>0&&(0,t.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 border-b border-border bg-gray-50/30",children:(0,t.jsxs)("h2",{className:"text-[14px] font-semibold text-text-primary flex items-center gap-2",children:[(0,t.jsx)(n.Truck,{className:"w-4 h-4 text-primary"}),"Linked Delivery Challans"]})}),(0,t.jsx)("div",{className:"p-4",children:f.map(s=>(0,t.jsxs)("button",{onClick:()=>e.push(`/dc/${s.dc_number}`),className:"w-full text-left p-3 hover:bg-gray-50 rounded-lg transition-colors flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-text-primary",children:s.dc_number}),(0,t.jsx)("div",{className:"text-xs text-text-secondary",children:s.dc_date})]}),(0,t.jsx)(a.ArrowLeft,{className:"w-4 h-4 text-text-secondary rotate-180"})]},s.dc_number))})]})]})}function y(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"text-primary font-medium",children:"Loading..."})}),children:(0,t.jsx)(p,{})})}e.s(["default",()=>y],19015)}]);