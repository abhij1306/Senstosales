(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,35952,82468,e=>{"use strict";var t=e.i(12063);let s=(0,t.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>s],35952);let r=(0,t.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>r],82468)},9975,e=>{"use strict";var t=e.i(78722),s=e.i(89490),r=e.i(35952),a=e.i(10496),l=e.i(12063);let d=(0,l.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var i=e.i(82468);let c=(0,l.default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var x=e.i(93889);function n(){let[e,l]=(0,s.useState)([]),[n,o]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0),[p,u]=(0,s.useState)([]),[y,g]=(0,s.useState)(!1),[b,j]=(0,s.useState)(null),[f,N]=(0,s.useState)(1);(0,s.useEffect)(()=>{v(),w()},[]);let v=async()=>{try{let e=await fetch(`${x.API_BASE_URL}/api/srv`);if(!e.ok){console.error("Failed to load SRVs:",e.status),l([]);return}let t=await e.json();l(Array.isArray(t)?t:[])}catch(e){console.error("Error loading SRVs:",e),l([])}finally{h(!1)}},w=async()=>{try{let e=await fetch(`${x.API_BASE_URL}/api/srv/stats`);if(!e.ok)return void console.error("Failed to load SRV stats:",e.status);let t=await e.json();o(t)}catch(e){console.error("Error loading SRV stats:",e)}},S=async()=>{if(0===p.length)return;g(!0);let e=new FormData;p.forEach(t=>e.append("files",t));try{let t=await fetch(`${x.API_BASE_URL}/api/srv/upload/batch`,{method:"POST",body:e}),s=await t.json();j(s),s.successful>0&&(await v(),await w(),u([]))}catch(e){console.error("Error uploading SRVs:",e),alert("Upload failed. Please try again.")}finally{g(!1)}},R=Math.ceil(e.length/10),_=(f-1)*10,V=e.slice(_,_+10);return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Stores Receipt Vouchers (SRV)"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Upload and track buyer-generated SRVs"})]}),n&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Total SRVs"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:n.total_srvs})]}),(0,t.jsx)(a.FileText,{className:"w-8 h-8 text-blue-600"})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Total Received"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600 mt-1",children:n.total_received_qty.toFixed(0)})]}),(0,t.jsx)(d,{className:"w-8 h-8 text-green-600"})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Total Rejected"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600 mt-1",children:n.total_rejected_qty.toFixed(0)})]}),(0,t.jsx)(i.XCircle,{className:"w-8 h-8 text-red-600"})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Rejection Rate"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:[n.rejection_rate.toFixed(2),"%"]})]}),(0,t.jsx)(c,{className:"w-8 h-8 text-orange-600"})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload SRV Files"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("label",{className:"flex-1",children:[(0,t.jsx)("div",{className:"flex items-center justify-center border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-500 cursor-pointer transition-colors",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(r.Upload,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:p.length>0?`${p.length} file(s) selected`:"Click to select SRV HTML files"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Supports multiple files"})]})}),(0,t.jsx)("input",{type:"file",multiple:!0,accept:".html",onChange:e=>{e.target.files&&(u(Array.from(e.target.files)),j(null))},className:"hidden"})]})}),p.length>0&&(0,t.jsx)("button",{onClick:S,disabled:y,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:y?"Uploading...":`Upload ${p.length} File(s)`}),b&&(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 space-y-2",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Upload Results: ",b.successful," successful, ",b.failed," failed"]}),(0,t.jsx)("div",{className:"max-h-40 overflow-y-auto space-y-1",children:b.results.map((e,s)=>(0,t.jsxs)("div",{className:`text-xs p-2 rounded ${e.success?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[(0,t.jsxs)("span",{className:"font-medium",children:[e.filename,":"]})," ",e.message]},s))})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"SRV List"})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SRV Number"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SRV Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"PO Number"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Received Qty"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Rejected Qty"}),(0,t.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:m?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"Loading SRVs..."})}):0===V.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No SRVs found. Upload SRV files to get started."})}):V.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("a",{href:`/srv/view?id=${e.srv_number}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:e.srv_number})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.srv_date}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("a",{href:`/po/view?id=${e.po_number}`,className:"text-blue-600 hover:text-blue-800 text-sm",children:e.po_number})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right text-sm text-green-600 font-medium",children:e.total_received_qty.toFixed(2)}),(0,t.jsx)("td",{className:"px-6 py-4 text-right text-sm text-red-600 font-medium",children:e.total_rejected_qty.toFixed(2)}),(0,t.jsx)("td",{className:"px-6 py-4 text-center",children:(0,t.jsx)("a",{href:`/srv/view?id=${e.srv_number}`,className:"text-xs text-blue-600 hover:text-blue-800",children:"View Details"})})]},e.srv_number))})]})}),R>1&&(0,t.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",_+1," to ",Math.min(_+10,e.length)," of"," ",e.length," SRVs"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>N(e=>Math.max(1,e-1)),disabled:1===f,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>N(e=>Math.min(R,e+1)),disabled:f===R,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]})})}e.s(["default",()=>n],9975)}]);