(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6578,e=>{"use strict";let s=(0,e.i(12063).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>s],6578)},35952,82468,e=>{"use strict";var s=e.i(12063);let t=(0,s.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],35952);let r=(0,s.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>r],82468)},58628,e=>{"use strict";let s=(0,e.i(12063).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>s],58628)},63188,63409,e=>{"use strict";var s=e.i(12063);let t=(0,s.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],63188);let r=(0,s.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>r],63409)},36384,e=>{"use strict";let s=(0,e.i(12063).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>s],36384)},99319,75112,e=>{"use strict";let s=(0,e.i(12063).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>s],99319);var t=e.i(78722),r=e.i(63188),a=e.i(63409);function l({currentPage:e,totalItems:s,itemsPerPage:l,onPageChange:i}){let d=Math.ceil(s/l);if(0===s||d<=1)return null;let n=Math.min(e*l,s),c=()=>{e>1&&i(e-1)},x=()=>{e<d&&i(e+1)};return(0,t.jsxs)("div",{className:"flex items-center justify-between px-2 py-4 border-t border-border mt-4",children:[(0,t.jsxs)("div",{className:"hidden sm:flex flex-1 items-center justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"text-[13px] text-text-secondary",children:["Showing ",(0,t.jsx)("span",{className:"font-semibold text-text-primary",children:(e-1)*l+1})," to ",(0,t.jsx)("span",{className:"font-semibold text-text-primary",children:n})," of ",(0,t.jsx)("span",{className:"font-semibold text-text-primary",children:s})," entries"]})}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)("button",{onClick:c,disabled:1===e,className:"px-3 py-1.5 flex items-center gap-1 rounded-md border border-border bg-white text-text-secondary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:[(0,t.jsx)(r.ChevronLeft,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"Previous"})]}),(0,t.jsx)("div",{className:"flex items-center gap-1 mx-2",children:(()=>{let s=[];if(d<=7)for(let e=1;e<=d;e++)s.push(e);else if(e<=4){for(let e=1;e<=5;e++)s.push(e);s.push("..."),s.push(d)}else if(e>=d-3){s.push(1),s.push("...");for(let e=d-4;e<=d;e++)s.push(e)}else s.push(1),s.push("..."),s.push(e-1),s.push(e),s.push(e+1),s.push("..."),s.push(d);return s})().map((s,r)=>"number"==typeof s?(0,t.jsx)("button",{onClick:()=>i(s),className:`w-8 h-8 flex items-center justify-center rounded-md text-xs font-medium transition-colors ${e===s?"bg-primary text-white":"bg-white border border-border text-text-secondary hover:bg-gray-50"}`,children:s},r):(0,t.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-xs text-text-secondary",children:"..."},r))}),(0,t.jsxs)("button",{onClick:x,disabled:e===d,className:"px-3 py-1.5 flex items-center gap-1 rounded-md border border-border bg-white text-text-secondary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("span",{className:"text-xs font-medium",children:"Next"}),(0,t.jsx)(a.ChevronRight,{className:"w-3.5 h-3.5"})]})]})]}),(0,t.jsxs)("div",{className:"flex sm:hidden justify-between w-full",children:[(0,t.jsxs)("button",{onClick:c,disabled:1===e,className:"px-3 py-1.5 flex items-center gap-1 rounded-md border border-border bg-white text-text-secondary disabled:opacity-50 hover:bg-gray-50",children:[(0,t.jsx)(r.ChevronLeft,{className:"w-4 h-4"})," Previous"]}),(0,t.jsxs)("button",{onClick:x,disabled:e===d,className:"px-3 py-1.5 flex items-center gap-1 rounded-md border border-border bg-white text-text-secondary disabled:opacity-50 hover:bg-gray-50",children:["Next ",(0,t.jsx)(a.ChevronRight,{className:"w-4 h-4"})]})]})]})}e.s(["default",()=>l],75112)},74165,e=>{"use strict";let s=(0,e.i(12063).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>s],74165)},13001,e=>{"use strict";var s=e.i(78722),t=e.i(89490),r=e.i(83485),a=e.i(69244),l=e.i(93889),i=e.i(35952),d=e.i(35073),n=e.i(74165),c=e.i(82468),x=e.i(82874),o=e.i(85257),m=e.i(93409),p=e.i(99319),h=e.i(58628);let u=(0,e.i(12063).default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var g=e.i(6578),b=e.i(36384),f=e.i(10496),y=e.i(75112);function j(){let e=(0,a.useRouter)(),[j,N]=(0,t.useState)([]),[v,w]=(0,t.useState)(null),[k,C]=(0,t.useState)(!0),[_,S]=(0,t.useState)(!1),[P,O]=(0,t.useState)([]),[L,A]=(0,t.useState)(null),[M,U]=(0,t.useState)(""),[q,T]=(0,t.useState)("All Statuses"),[F,R]=(0,t.useState)(1);(0,t.useEffect)(()=>{(async()=>{try{let[e,s]=await Promise.all([l.api.listPOs(),l.api.getPOStats()]);N(e),w(s)}catch(e){console.error("Failed to load PO data:",e)}finally{C(!1)}})()},[]);let $=async()=>{if(0!==P.length){S(!0),A(null);try{let e=await l.api.uploadPOBatch(P),s={total:e.results.length,successful:e.results.filter(e=>e.success).length,failed:e.results.filter(e=>!e.success).length,results:e.results.map(e=>({filename:e.filename||"Unknown",success:e.success||!1,po_number:e.po_number||null,message:e.message||(e.success?"Uploaded successfully":"Upload failed")}))};if(A(s),s.successful>0){let[e,s]=await Promise.all([l.api.listPOs(),l.api.getPOStats()]);N(e),w(s)}O([])}catch(e){console.error("Upload failed:",e)}finally{S(!1)}}},z=j.filter(e=>{let s=e.po_number.toString().includes(M)||e.supplier_name&&e.supplier_name.toLowerCase().includes(M.toLowerCase()),t=e.po_status||"New",r="All Statuses"===q||t===q;return s&&r}),D=z.slice((F-1)*10,10*F);return k?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)(x.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-[20px] font-semibold text-text-primary tracking-tight",children:"Purchase Orders"}),(0,s.jsx)("p",{className:"text-[13px] text-text-secondary mt-1",children:"Manage procurement requests, track status, and view history."})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:()=>e.push("/po/create"),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm font-medium shadow-sm transition-colors",children:[(0,s.jsx)(o.Plus,{className:"w-4 h-4"}),"Create New PO"]}),(0,s.jsxs)("label",{className:"px-4 py-2 bg-white border border-border rounded-lg text-sm font-medium text-text-secondary hover:bg-gray-50 cursor-pointer flex items-center gap-2 shadow-sm transition-colors",children:[(0,s.jsx)(i.Upload,{className:"w-4 h-4"}),"Upload PO Files",(0,s.jsx)("input",{type:"file",accept:".html",multiple:!0,onChange:e=>{O(Array.from(e.target.files||[])),A(null)},disabled:_,className:"hidden"})]})]})]}),v&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"glass-card p-6 flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[12px] font-semibold text-text-secondary uppercase tracking-wider",children:"Open Orders"}),(0,s.jsx)("h3",{className:"text-[24px] font-bold text-text-primary mt-2",children:v.open_orders_count}),(0,s.jsx)("span",{className:"inline-flex mt-2 items-center px-2 py-0.5 rounded text-[11px] font-medium bg-success/10 text-success border border-success/20",children:"Active"})]}),(0,s.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg text-primary",children:(0,s.jsx)(u,{className:"w-6 h-6"})})]}),(0,s.jsxs)("div",{className:"glass-card p-6 flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[12px] font-semibold text-text-secondary uppercase tracking-wider",children:"Pending Approval"}),(0,s.jsx)("h3",{className:"text-[24px] font-bold text-text-primary mt-2",children:v.pending_approval_count}),(0,s.jsx)("span",{className:"inline-flex mt-2 items-center px-2 py-0.5 rounded text-[11px] font-medium bg-warning/10 text-warning border border-warning/20",children:"Requires Attention"})]}),(0,s.jsx)("div",{className:"p-3 bg-amber-50 rounded-lg text-warning",children:(0,s.jsx)(g.Clock,{className:"w-6 h-6"})})]}),(0,s.jsxs)("div",{className:"glass-card p-6 flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[12px] font-semibold text-text-secondary uppercase tracking-wider",children:"Total Value (YTD)"}),(0,s.jsxs)("h3",{className:"text-[24px] font-bold text-text-primary mt-2",children:["₹",v.total_value_ytd.toLocaleString("en-IN")]}),(0,s.jsxs)("div",{className:"flex items-center mt-2 text-success text-[12px] font-medium",children:[(0,s.jsx)(h.TrendingUp,{className:"w-3 h-3 mr-1"}),(0,s.jsxs)("span",{children:[v.total_value_change,"% from last month"]})]})]}),(0,s.jsx)("div",{className:"p-3 bg-emerald-50 rounded-lg text-emerald-600",children:(0,s.jsx)(b.DollarSign,{className:"w-6 h-6"})})]})]}),(P.length>0||L)&&(0,s.jsxs)("div",{className:"glass-card p-6 space-y-6",children:[P.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-text-primary",children:["Selected Files (",P.length,")"]}),(0,s.jsx)("button",{onClick:$,disabled:_,className:"px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:_?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Loader2,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Upload,{className:"w-4 h-4"}),"Upload All"]})})]}),(0,s.jsx)("div",{className:"space-y-2",children:P.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-border",children:[(0,s.jsx)("span",{className:"text-sm text-text-primary",children:e.name}),(0,s.jsx)("button",{onClick:()=>{O(e=>e.filter((e,s)=>s!==t))},disabled:_,className:"text-text-secondary hover:text-danger disabled:opacity-50 transition-colors",children:(0,s.jsx)(d.X,{className:"w-4 h-4"})})]},t))})]}),L&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-[16px] font-medium text-text-primary mb-3",children:"Upload Results"}),(0,s.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.CheckCircle,{className:"w-5 h-5 text-success"}),(0,s.jsxs)("span",{className:"text-sm text-text-secondary",children:[(0,s.jsx)("strong",{className:"text-text-primary",children:L.successful})," successful"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.XCircle,{className:"w-5 h-5 text-danger"}),(0,s.jsxs)("span",{className:"text-sm text-text-secondary",children:[(0,s.jsx)("strong",{className:"text-text-primary",children:L.failed})," failed"]})]})]}),(0,s.jsx)("div",{className:"space-y-2",children:L.results.map((e,t)=>(0,s.jsx)("div",{className:`p-3 rounded-lg border ${e.success?"bg-success/10 border-success/20":"bg-danger/10 border-danger/20"}`,children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[e.success?(0,s.jsx)(n.CheckCircle,{className:"w-4 h-4 text-success mt-0.5"}):(0,s.jsx)(c.XCircle,{className:"w-4 h-4 text-danger mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-text-primary",children:e.filename}),(0,s.jsx)("div",{className:`text-sm ${e.success?"text-success":"text-danger"}`,children:e.message})]})]})},t))})]})]}),(0,s.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-border bg-gray-50/30 flex flex-col sm:flex-row gap-4 justify-between items-center",children:[(0,s.jsxs)("div",{className:"relative w-full sm:w-96",children:[(0,s.jsx)(m.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-secondary"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by PO number or supplier...",value:M,onChange:e=>U(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]}),(0,s.jsx)("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:(0,s.jsxs)("div",{className:"relative flex-1 sm:flex-none",children:[(0,s.jsx)(p.Filter,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-secondary"}),(0,s.jsxs)("select",{value:q,onChange:e=>T(e.target.value),className:"w-full sm:w-40 pl-10 pr-8 py-2 bg-white border border-border rounded-lg text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-primary cursor-pointer text-text-secondary",children:[(0,s.jsx)("option",{children:"All Statuses"}),(0,s.jsx)("option",{children:"Active"}),(0,s.jsx)("option",{children:"New"}),(0,s.jsx)("option",{children:"Closed"})]}),(0,s.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none border-l border-border h-4"})]})})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50/50 text-text-secondary border-b border-border text-[11px] uppercase tracking-wider font-semibold",children:[(0,s.jsx)("th",{className:"px-6 py-4 w-12 text-center",children:(0,s.jsx)("input",{type:"checkbox",className:"rounded border-border text-primary focus:ring-primary"})}),(0,s.jsx)("th",{className:"px-6 py-4",children:"PO Number"}),(0,s.jsx)("th",{className:"px-6 py-4",children:"Date"}),(0,s.jsx)("th",{className:"px-6 py-4 text-right",children:"Value"}),(0,s.jsx)("th",{className:"px-6 py-4 text-right",children:"Ordered"}),(0,s.jsx)("th",{className:"px-6 py-4 text-right",children:"Dispatched"}),(0,s.jsx)("th",{className:"px-6 py-4 text-center",children:"Pending"}),(0,s.jsx)("th",{className:"px-6 py-4",children:"Linked Challans"}),(0,s.jsx)("th",{className:"px-6 py-4 w-16"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-border/50 bg-white/50",children:0===z.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:9,className:"px-6 py-12 text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsx)(f.FileText,{className:"w-12 h-12 text-border mb-3"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-text-primary",children:"No purchase orders found"}),(0,s.jsx)("p",{className:"text-text-secondary text-sm mt-1 max-w-sm",children:"Try adjusting your search or filters, or upload a new PO to get started."})]})})}):D.map(e=>{let t;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:[(0,s.jsx)("td",{className:"px-6 py-3 text-center",children:(0,s.jsx)("input",{type:"checkbox",className:"rounded border-border text-primary focus:ring-primary"})}),(0,s.jsx)("td",{className:"px-6 py-3",children:(0,s.jsxs)(r.default,{href:`/po/view?id=${e.po_number}`,className:"text-primary font-semibold hover:text-blue-700 hover:underline text-[13px]",children:["PO-",e.po_number]})}),(0,s.jsx)("td",{className:"px-6 py-3 text-[13px] text-text-secondary font-medium",children:e.po_date||"N/A"}),(0,s.jsxs)("td",{className:"px-6 py-3 text-[13px] text-text-primary font-semibold text-right",children:["₹",e.po_value?.toLocaleString("en-IN")||"0"]}),(0,s.jsx)("td",{className:"px-6 py-3 text-[13px] text-text-secondary text-right font-medium",children:e.total_ordered_quantity?.toLocaleString()||"0"}),(0,s.jsx)("td",{className:"px-6 py-3 text-[13px] text-primary text-right font-medium",children:e.total_dispatched_quantity?.toLocaleString()||"0"}),(0,s.jsx)("td",{className:"px-6 py-3 text-center",children:(0,s.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-[11px] font-medium border ${e.total_pending_quantity>0?"bg-warning/10 text-warning border-warning/20":"bg-success/10 text-success border-success/20"}`,children:e.total_pending_quantity?.toLocaleString()||"0"})}),(0,s.jsx)("td",{className:"px-6 py-3 text-[13px]",children:e.linked_dc_numbers?(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5",children:(t=e.linked_dc_numbers.split(",").map(e=>e.trim()).filter(Boolean)).length<=2?t.map((e,t)=>(0,s.jsx)(r.default,{href:`/dc/view?id=${e}`,className:"px-2 py-0.5 bg-indigo-50 text-indigo-700 text-[11px] rounded border border-indigo-100 font-medium hover:bg-indigo-100 transition-colors",children:e},t)):(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsxs)("button",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-700 text-[11px] rounded border border-indigo-100 font-bold hover:bg-indigo-100 transition-colors",children:[t.length," Challans"]}),(0,s.jsxs)("div",{className:"absolute left-0 top-full mt-1 hidden group-hover:block w-48 bg-white border border-border shadow-xl rounded-lg p-2 z-20",children:[(0,s.jsx)("div",{className:"text-[10px] uppercase font-bold text-text-secondary mb-2 px-1 tracking-wider",children:"Linked Challans"}),(0,s.jsx)("div",{className:"flex flex-col gap-1 max-h-48 overflow-y-auto",children:t.map((e,t)=>(0,s.jsx)(r.default,{href:`/dc/view?id=${e}`,className:"block px-2 py-1.5 text-xs font-medium text-text-primary hover:bg-indigo-50 hover:text-indigo-700 rounded transition-colors",children:e},t))})]})]})}):(0,s.jsx)("span",{className:"text-text-secondary/50 text-xs italic",children:"--"})}),(0,s.jsx)("td",{className:"px-6 py-3 text-center",children:(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,s.jsxs)("div",{className:"flex space-x-[3px]",children:[(0,s.jsx)("div",{className:"w-1 h-1 bg-current rounded-full"}),(0,s.jsx)("div",{className:"w-1 h-1 bg-current rounded-full"}),(0,s.jsx)("div",{className:"w-1 h-1 bg-current rounded-full"})]})})})})]},e.po_number)})})]})}),(0,s.jsx)(y.default,{currentPage:F,totalItems:z.length,itemsPerPage:10,onPageChange:R})]})]})}e.s(["default",()=>j],13001)}]);