(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4278,e=>{"use strict";var t=e.i(56870),s=e.i(78722),a=e.i(89490),r=e.i(69244),l=e.i(10496),i=e.i(12063);let d=(0,i.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var x=e.i(36384),c=e.i(46362),n=e.i(40122),o=e.i(82874);let m=(0,i.default)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var p=e.i(6578),h=e.i(58628),y=e.i(74187);let g=(0,i.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);function u({data:e,aiSummary:t}){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-[18px] font-semibold text-text-primary",children:"PO Health Summary"}),(0,s.jsxs)("p",{className:"text-[12px] text-text-secondary mt-1",children:["Period: ",e.period]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"glass-card p-4",children:[(0,s.jsx)("p",{className:"text-[11px] text-text-secondary uppercase",children:"Total POs"}),(0,s.jsx)("p",{className:"text-[24px] font-bold text-text-primary mt-1",children:e.summary.total_pos})]}),(0,s.jsxs)("div",{className:"glass-card p-4",children:[(0,s.jsx)("p",{className:"text-[11px] text-text-secondary uppercase",children:"Not Started"}),(0,s.jsx)("p",{className:"text-[24px] font-bold text-danger mt-1",children:e.summary.not_started})]}),(0,s.jsxs)("div",{className:"glass-card p-4",children:[(0,s.jsx)("p",{className:"text-[11px] text-text-secondary uppercase",children:"Partial"}),(0,s.jsx)("p",{className:"text-[24px] font-bold text-warning mt-1",children:e.summary.partially_dispatched})]}),(0,s.jsxs)("div",{className:"glass-card p-4",children:[(0,s.jsx)("p",{className:"text-[11px] text-text-secondary uppercase",children:"Complete"}),(0,s.jsx)("p",{className:"text-[24px] font-bold text-success mt-1",children:e.summary.fully_dispatched})]})]}),t&&(0,s.jsx)("div",{className:"glass-card p-4 bg-primary/5 border border-primary/20",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-primary text-lg",children:"✨"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-[12px] font-semibold text-text-primary mb-1",children:"AI Insight"}),(0,s.jsx)("p",{className:"text-[13px] text-text-secondary leading-relaxed",children:t})]})]})}),(0,s.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-border",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-[11px] font-semibold text-text-secondary uppercase",children:"PO Number"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-[11px] font-semibold text-text-secondary uppercase",children:"Order Value"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right text-[11px] font-semibold text-text-secondary uppercase",children:"Dispatched"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right text-[11px] font-semibold text-text-secondary uppercase",children:"Pending"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right text-[11px] font-semibold text-text-secondary uppercase",children:"Age (Days)"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-[11px] font-semibold text-text-secondary uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right text-[11px] font-semibold text-text-secondary uppercase",children:"Fulfillment %"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-border",children:e.pos.slice(0,20).map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-[13px] font-medium text-text-primary",children:e.po_number}),(0,s.jsx)("td",{className:"px-4 py-3 text-[13px] text-text-primary text-right",children:e.ordered_qty.toLocaleString()}),(0,s.jsx)("td",{className:"px-4 py-3 text-[13px] text-text-primary text-right",children:e.dispatched_qty.toLocaleString()}),(0,s.jsx)("td",{className:"px-4 py-3 text-[13px] font-medium text-warning text-right",children:e.pending_qty.toLocaleString()}),(0,s.jsx)("td",{className:"px-4 py-3 text-[13px] text-text-secondary text-right",children:e.po_age_days}),(0,s.jsx)("td",{className:"px-4 py-3 text-center",children:(0,s.jsx)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-[10px] font-medium ${(e=>{switch(e){case"FULLY_DISPATCHED":return"text-success bg-success/10";case"PARTIALLY_DISPATCHED":return"text-warning bg-warning/10";case"NOT_STARTED":return"text-danger bg-danger/10";default:return"text-text-secondary bg-gray-100"}})(e.fulfillment_status)}`,children:e.fulfillment_status.replace("_"," ")})}),(0,s.jsxs)("td",{className:"px-4 py-3 text-[13px] text-text-primary text-right",children:[e.fulfillment_pct,"%"]})]},e.po_number))})]})}),e.pos.length>20&&(0,s.jsx)("div",{className:"px-4 py-3 bg-gray-50 border-t border-border text-center",children:(0,s.jsxs)("p",{className:"text-[12px] text-text-secondary",children:["Showing 20 of ",e.pos.length," POs"]})})]}),(0,s.jsx)("div",{className:"flex gap-3"})]})}function j({data:e,aiSummary:t}){let a=[{key:"0_7_days",label:"0-7 Days",color:"bg-success",data:e.age_buckets["0_7_days"]},{key:"8_30_days",label:"8-30 Days",color:"bg-warning",data:e.age_buckets["8_30_days"]},{key:"30_plus_days",label:"30+ Days",color:"bg-danger",data:e.age_buckets["30_plus_days"]}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-[18px] font-semibold text-text-primary",children:"PO Aging & Risk Analysis"}),(0,s.jsxs)("p",{className:"text-[12px] text-text-secondary mt-1",children:["Total Pending: ",e.total_pending_qty.toLocaleString()," units"]})]}),t&&(0,s.jsx)("div",{className:"glass-card p-4 bg-primary/5 border border-primary/20",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-primary text-lg",children:"✨"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-[12px] font-semibold text-text-primary mb-1",children:"AI Insight"}),(0,s.jsx)("p",{className:"text-[13px] text-text-secondary leading-relaxed",children:t})]})]})}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4",children:a.map(e=>(0,s.jsxs)("div",{className:"glass-card p-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("p",{className:"text-[12px] font-semibold text-text-secondary uppercase",children:e.label}),(0,s.jsx)("div",{className:`w-3 h-3 rounded-full ${e.color}`})]}),(0,s.jsx)("p",{className:"text-[24px] font-bold text-text-primary mb-1",children:e.data.pending_qty.toLocaleString()}),(0,s.jsxs)("p",{className:"text-[11px] text-text-secondary",children:[e.data.po_count," POs • ",e.data.percentage,"% of total"]})]},e.key))}),(0,s.jsxs)("div",{className:"glass-card p-5",children:[(0,s.jsx)("h3",{className:"text-[14px] font-semibold text-text-primary mb-4",children:"POs by Age Bucket"}),(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-[13px] font-medium text-text-primary",children:e.label}),(0,s.jsxs)("p",{className:"text-[12px] text-text-secondary",children:[e.data.po_count," POs"]})]}),e.data.pos.length>0?(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.data.pos.slice(0,10).map(e=>(0,s.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-text-primary text-[11px] font-medium rounded",children:e},e)),e.data.pos.length>10&&(0,s.jsxs)("span",{className:"px-2 py-1 text-text-secondary text-[11px]",children:["+",e.data.pos.length-10," more"]})]}):(0,s.jsx)("p",{className:"text-[12px] text-text-secondary italic",children:"No POs in this bucket"})]},e.key))})]})]})}function b({data:e,aiSummary:t}){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-[18px] font-semibold text-text-primary",children:"PO Fulfillment Efficiency"}),(0,s.jsxs)("p",{className:"text-[12px] text-text-secondary mt-1",children:["Period: ",e.period]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"glass-card p-4",children:[(0,s.jsx)("p",{className:"text-[11px] text-text-secondary uppercase mb-2",children:"Best Performer"}),(0,s.jsx)("p",{className:"text-[20px] font-bold text-success",children:e.insights.best_po.po_number||"N/A"}),(0,s.jsxs)("p",{className:"text-[12px] text-text-secondary mt-1",children:[e.insights.best_po.fulfillment_pct,"% fulfilled"]})]}),(0,s.jsxs)("div",{className:"glass-card p-4",children:[(0,s.jsx)("p",{className:"text-[11px] text-text-secondary uppercase mb-2",children:"Worst Performer"}),(0,s.jsx)("p",{className:"text-[20px] font-bold text-danger",children:e.insights.worst_po.po_number||"N/A"}),(0,s.jsxs)("p",{className:"text-[12px] text-text-secondary mt-1",children:[e.insights.worst_po.fulfillment_pct,"% fulfilled"]})]}),(0,s.jsxs)("div",{className:"glass-card p-4",children:[(0,s.jsx)("p",{className:"text-[11px] text-text-secondary uppercase mb-2",children:"Zero Fulfillment"}),(0,s.jsx)("p",{className:"text-[20px] font-bold text-warning",children:e.insights.zero_fulfillment_count}),(0,s.jsx)("p",{className:"text-[12px] text-text-secondary mt-1",children:"POs with 0% dispatch"})]})]}),t&&(0,s.jsx)("div",{className:"glass-card p-4 bg-primary/5 border border-primary/20",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-primary text-lg",children:"✨"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-[12px] font-semibold text-text-primary mb-1",children:"AI Insight"}),(0,s.jsx)("p",{className:"text-[13px] text-text-secondary leading-relaxed",children:t})]})]})}),(0,s.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-border",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-[11px] font-semibold text-text-secondary uppercase",children:"PO Number"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-[11px] font-semibold text-text-secondary uppercase",children:"Lead Time"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right text-[11px] font-semibold text-text-secondary uppercase",children:"Dispatched"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right text-[11px] font-semibold text-text-secondary uppercase",children:"Fulfillment %"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-border",children:e.pos.slice(0,20).map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-[13px] font-medium text-text-primary",children:e.po_number}),(0,s.jsx)("td",{className:"px-4 py-3 text-[13px] text-text-primary text-right",children:e.ordered.toLocaleString()}),(0,s.jsx)("td",{className:"px-4 py-3 text-[13px] text-text-primary text-right",children:e.dispatched.toLocaleString()}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:(0,s.jsxs)("span",{className:`inline-flex items-center px-2 py-1 rounded text-[12px] font-medium ${0===e.fulfillment_pct?"bg-danger/10 text-danger":e.fulfillment_pct<50?"bg-warning/10 text-warning":"bg-success/10 text-success"}`,children:[e.fulfillment_pct,"%"]})})]},e.po_number))})]})}),e.pos.length>20&&(0,s.jsx)("div",{className:"px-4 py-3 bg-gray-50 border-t border-border text-center",children:(0,s.jsxs)("p",{className:"text-[12px] text-text-secondary",children:["Showing 20 of ",e.pos.length," POs"]})})]})]})}function N({data:e,aiSummary:t}){let a=[{key:"no_dc",title:"No Delivery Challan",description:"POs blocked at dispatch stage",color:"bg-danger",textColor:"text-danger",data:e.coverage.no_dc},{key:"dc_but_no_invoice",title:"DC Created, Not Invoiced",description:"POs blocked at billing stage",color:"bg-warning",textColor:"text-warning",data:e.coverage.dc_but_no_invoice},{key:"fully_invoiced",title:"Fully Invoiced",description:"POs completed",color:"bg-success",textColor:"text-success",data:e.coverage.fully_invoiced}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-[18px] font-semibold text-text-primary",children:"PO Dependency Analysis"}),(0,s.jsxs)("p",{className:"text-[12px] text-text-secondary mt-1",children:["Total POs: ",e.total_pos," • Analyzing dispatch and billing coverage"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4",children:a.map(t=>(0,s.jsxs)("div",{className:"glass-card p-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("div",{className:`w-3 h-3 rounded-full ${t.color}`}),(0,s.jsx)("p",{className:`text-[24px] font-bold ${t.textColor}`,children:t.data.count})]}),(0,s.jsx)("p",{className:"text-[13px] font-semibold text-text-primary mb-1",children:t.title}),(0,s.jsx)("p",{className:"text-[11px] text-text-secondary",children:t.description}),(0,s.jsx)("div",{className:"mt-2 h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:`h-full ${t.color}`,style:{width:`${t.data.count/e.total_pos*100}%`}})})]},t.key))}),t&&(0,s.jsx)("div",{className:"glass-card p-4 bg-primary/5 border border-primary/20",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-primary text-lg",children:"✨"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-[12px] font-semibold text-text-primary mb-1",children:"AI Insight"}),(0,s.jsx)("p",{className:"text-[13px] text-text-secondary leading-relaxed",children:t})]})]})}),(0,s.jsx)("div",{className:"space-y-4",children:a.map(t=>(0,s.jsxs)("div",{className:"glass-card p-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-[14px] font-semibold text-text-primary",children:t.title}),(0,s.jsxs)("p",{className:"text-[12px] text-text-secondary mt-0.5",children:[t.data.count," POs"]})]}),(0,s.jsxs)("div",{className:`px-3 py-1 rounded-full ${t.color}/10 ${t.textColor} text-[12px] font-medium`,children:[Math.round(t.data.count/e.total_pos*100),"% of total"]})]}),t.data.pos.length>0?(0,s.jsxs)("div",{className:"space-y-2",children:[t.data.pos.slice(0,10).map((e,t)=>(0,s.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-[13px] font-medium text-text-primary",children:e.po_number})})},t)),t.data.pos.length>10&&(0,s.jsxs)("p",{className:"text-[12px] text-text-secondary text-center pt-2",children:["+",t.data.pos.length-10," more POs"]})]}):(0,s.jsx)("p",{className:"text-[12px] text-text-secondary italic text-center py-4",children:"No POs in this category"})]},t.key))})]})}var f=e.i(63188),v=e.i(63409);function _({currentPage:e,totalPages:t,onPageChange:a,itemName:r="Items"}){return t<=1?null:(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border bg-gray-50/50",children:[(0,s.jsxs)("div",{className:"text-xs text-text-secondary",children:["Page ",(0,s.jsx)("span",{className:"font-medium text-text-primary",children:e})," of ",(0,s.jsx)("span",{className:"font-medium text-text-primary",children:t})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>a(e-1),disabled:1===e,className:"p-1 rounded-md hover:bg-white hover:shadow-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all text-text-secondary hover:text-text-primary border border-transparent hover:border-gray-200",children:(0,s.jsx)(f.ChevronLeft,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>a(e+1),disabled:e>=t,className:"p-1 rounded-md hover:bg-white hover:shadow-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all text-text-secondary hover:text-text-primary border border-transparent hover:border-gray-200",children:(0,s.jsx)(v.ChevronRight,{className:"w-4 h-4"})})]})]})}var w=e.i(70658),S=e.i(93889);function P({data:e}){let[t,r]=(0,a.useState)(1);if(!e||!e.rows||0===e.rows.length)return(0,s.jsx)("div",{className:"glass-card p-8 text-center",children:(0,s.jsx)("p",{className:"text-text-secondary",children:"No data for selected period"})});let l=Math.ceil(e.rows.length/10),i=e.rows.slice((t-1)*10,10*t);return(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-[16px] font-semibold text-text-primary",children:["PO Summary (",e.period.start," to ",e.period.end,")"]}),(0,s.jsx)(w.default,{url:`${S.API_BASE_URL}/api/smart-reports/date-summary/export?entity=po&start_date=${e.period.start}&end_date=${e.period.end}`,filename:`PO_Summary_${e.period.start}_to_${e.period.end}.xlsx`,label:"Export",size:"sm"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Total POs"}),(0,s.jsx)("p",{className:"text-xl font-bold text-text-primary",children:e.totals.total_pos})]}),(0,s.jsxs)("div",{className:"p-3 bg-emerald-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Total Ordered"}),(0,s.jsx)("p",{className:"text-xl font-bold text-text-primary",children:e.totals.total_ordered.toLocaleString()})]}),(0,s.jsxs)("div",{className:"p-3 bg-purple-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Total Dispatched"}),(0,s.jsx)("p",{className:"text-xl font-bold text-text-primary",children:e.totals.total_dispatched.toLocaleString()})]}),(0,s.jsxs)("div",{className:"p-3 bg-amber-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Total Pending"}),(0,s.jsx)("p",{className:"text-xl font-bold text-text-primary",children:e.totals.total_pending.toLocaleString()})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-border",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"PO Number"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"PO Date"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"Ordered"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"Dispatched"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"Pending"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"Status"})]})}),(0,s.jsx)("tbody",{children:i.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-border/50 hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"py-3 px-4 font-medium text-text-primary",children:e.po_number}),(0,s.jsx)("td",{className:"py-3 px-4 text-text-secondary",children:e.po_date}),(0,s.jsx)("td",{className:"py-3 px-4 text-right text-text-primary",children:e.total_ordered.toLocaleString()}),(0,s.jsx)("td",{className:"py-3 px-4 text-right text-text-primary",children:e.total_dispatched.toLocaleString()}),(0,s.jsx)("td",{className:"py-3 px-4 text-right text-text-primary",children:e.pending_qty.toLocaleString()}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${"Completed"===e.status?"bg-emerald-100 text-emerald-700":"In Progress"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:e.status})})]},t))})]})}),(0,s.jsx)(_,{currentPage:t,totalPages:l,onPageChange:r,itemName:"POs"})]})}function k({data:e}){let[t,r]=(0,a.useState)(1);if(!e||!e.rows||0===e.rows.length)return(0,s.jsx)("div",{className:"glass-card p-8 text-center",children:(0,s.jsx)("p",{className:"text-text-secondary",children:"No data for selected period"})});let l=Math.ceil(e.rows.length/10),i=e.rows.slice((t-1)*10,10*t);return(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-[16px] font-semibold text-text-primary",children:["Challan Summary (",e.period.start," to ",e.period.end,")"]}),(0,s.jsx)(w.default,{url:`${S.API_BASE_URL}/api/smart-reports/date-summary/export?entity=challan&start_date=${e.period.start}&end_date=${e.period.end}`,filename:`Challan_Summary_${e.period.start}_to_${e.period.end}.xlsx`,label:"Export",size:"sm"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Total Challans"}),(0,s.jsx)("p",{className:"text-xl font-bold text-text-primary",children:e.totals.total_challans})]}),(0,s.jsxs)("div",{className:"p-3 bg-emerald-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Total Dispatched"}),(0,s.jsx)("p",{className:"text-xl font-bold text-text-primary",children:e.totals.total_dispatched.toLocaleString()})]}),(0,s.jsxs)("div",{className:"p-3 bg-amber-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Uninvoiced"}),(0,s.jsx)("p",{className:"text-xl font-bold text-text-primary",children:e.totals.uninvoiced_count})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-border",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"DC Number"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"DC Date"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"Linked PO"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"Dispatched Qty"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"Invoice Status"})]})}),(0,s.jsx)("tbody",{children:i.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-border/50 hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"py-3 px-4 font-medium text-text-primary",children:e.dc_number}),(0,s.jsx)("td",{className:"py-3 px-4 text-text-secondary",children:e.dc_date}),(0,s.jsx)("td",{className:"py-3 px-4 text-text-primary",children:e.po_number}),(0,s.jsx)("td",{className:"py-3 px-4 text-right text-text-primary",children:e.dispatched_qty.toLocaleString()}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${"Invoiced"===e.invoice_status?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:e.invoice_status})})]},t))})]})}),(0,s.jsx)(_,{currentPage:t,totalPages:l,onPageChange:r,itemName:"DC's"})]})}function C({data:e}){let[t,r]=(0,a.useState)(1);if(!e||!e.rows||0===e.rows.length)return(0,s.jsx)("div",{className:"glass-card p-8 text-center",children:(0,s.jsx)("p",{className:"text-text-secondary",children:"No data for selected period"})});let l=Math.ceil(e.rows.length/10),i=e.rows.slice((t-1)*10,10*t);return(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-[16px] font-semibold text-text-primary",children:["Invoice Summary (",e.period.start," to ",e.period.end,")"]}),(0,s.jsx)(w.default,{url:`${S.API_BASE_URL}/api/smart-reports/date-summary/export?entity=invoice&start_date=${e.period.start}&end_date=${e.period.end}`,filename:`Invoice_Summary_${e.period.start}_to_${e.period.end}.xlsx`,label:"Export",size:"sm"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Total Invoices"}),(0,s.jsx)("p",{className:"text-xl font-bold text-text-primary",children:e.totals.total_invoices})]}),(0,s.jsxs)("div",{className:"p-3 bg-emerald-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Total Value"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-text-primary",children:["₹",(e.totals.total_value/1e5).toFixed(2),"L"]})]}),(0,s.jsxs)("div",{className:"p-3 bg-purple-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Average Value"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-text-primary",children:["₹",(e.totals.avg_value/1e3).toFixed(1),"K"]})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-border",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"Invoice Number"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"Invoice Date"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"Linked DC Numbers"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 text-xs font-semibold text-text-secondary uppercase",children:"Invoice Value"})]})}),(0,s.jsx)("tbody",{children:i.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-border/50 hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"py-3 px-4 font-medium text-text-primary",children:e.invoice_number}),(0,s.jsx)("td",{className:"py-3 px-4 text-text-secondary",children:e.invoice_date}),(0,s.jsx)("td",{className:"py-3 px-4 text-text-primary",children:e.linked_dc_numbers}),(0,s.jsxs)("td",{className:"py-3 px-4 text-right text-text-primary font-medium",children:["₹",e.invoice_value.toLocaleString()]})]},t))})]})}),(0,s.jsx)(_,{currentPage:t,totalPages:l,onPageChange:r,itemName:"Invoices"})]})}function A(){let e=(0,r.useRouter)(),i=(0,r.useSearchParams)(),f=i.get("tab")||"summary",[v,_]=(0,a.useState)(f),[w,S]=(0,a.useState)("month"),[A,O]=(0,a.useState)(null),[D,I]=(0,a.useState)([]),[$,L]=(0,a.useState)([]),[T,F]=(0,a.useState)(!0),[E,q]=(0,a.useState)(null),[R,U]=(0,a.useState)("po_health"),[B,M]=(0,a.useState)(null),[z,H]=(0,a.useState)(!1),[V,Y]=(0,a.useState)(""),[K,Q]=(0,a.useState)(null),[G,X]=(0,a.useState)(!1),[J,W]=(0,a.useState)(""),[Z,ee]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=i.get("tab");e?_(e):(_("summary"),U(null),M(null),Y(""))},[i]),(0,a.useEffect)(()=>{et(),"analysis"===v&&R&&er(R)},[v,w]);let et=async()=>{F(!0),q(null);try{let e=t.default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000",s=await fetch(`${e}/api/smart-reports/kpis?period=${w}`);if(s.ok&&O(await s.json()),"pending"===v){let e=await fetch("http://localhost:8000/api/reports/smart-table");if(e.ok){let t=await e.json();I(t.filter(e=>"Pending"===e.status))}}else if("uninvoiced"===v){let e=await fetch("http://localhost:8000/api/reports/dc-without-invoice");e.ok&&L(await e.json())}}catch(e){console.error("Failed to load data:",e),q("Failed to load report data")}finally{F(!1)}},es=t=>{_(t),e.push(`/reports?tab=${t}`)},ea=e=>{let t=new Date,s=new Date,a=new Date;if("month"===e)s.setDate(1);else if("quarter"===e){let e=3*Math.floor(t.getMonth()/3);s.setMonth(e,1)}else"year"===e&&s.setMonth(0,1);return{start:s.toISOString().split("T")[0],end:a.toISOString().split("T")[0]}},er=async e=>{if(e){H(!0),U(e),Y("");try{let t={po_health:"po-health-summary",po_aging:"po-aging-risk",po_efficiency:"po-fulfillment-efficiency",po_dependency:"po-dependency-analysis"}[e],s=await fetch(`http://localhost:8000/api/ai-reports/${t}?period=${w}`);if(!s.ok)throw Error("Failed to fetch report");let a=await s.json();M(a);let r=await fetch("http://localhost:8000/api/ai-reports/generate-summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_type:e,period:w,data:a})});if(r.ok){let e=await r.json();Y(e.summary||"")}}catch(e){console.error("Failed to load report:",e),q("Failed to load report")}finally{H(!1)}}},el=async(e,s,a)=>{X(!0),W(e),ee({entity:e,startDate:s,endDate:a});try{let r=t.default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000",l=await fetch(`${r}/api/smart-reports/date-summary?entity=${e}&start_date=${s}&end_date=${a}`);if(!l.ok)throw Error("Failed to fetch date summary");let i=await l.json();Q(i)}catch(e){console.error("Failed to load date summary:",e),q("Failed to load date summary"),Q(null)}finally{X(!1)}};if(T&&!A)return(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)(o.Loader2,{className:"w-8 h-8 animate-spin text-primary"})});if(E||!A)return(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(n.AlertTriangle,{className:"w-12 h-12 text-danger mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-text-primary font-medium",children:"Failed to load reports"}),(0,s.jsx)("button",{onClick:et,className:"mt-4 px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-700",children:"Retry"})]})});let ei=A.alerts.uninvoiced_dcs+A.alerts.overdue_pos;return(p.Clock,c.Package,y.BarChart3,h.TrendingUp,n.AlertTriangle,R&&B)?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("button",{onClick:()=>{U(null),M(null),Y("")},className:"text-[13px] text-primary hover:underline",children:"← Back to Dashboard"}),z?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)(o.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):(0,s.jsxs)(s.Fragment,{children:["po_health"===R&&(0,s.jsx)(u,{data:B,aiSummary:V}),"po_aging"===R&&(0,s.jsx)(j,{data:B,aiSummary:V}),"po_efficiency"===R&&(0,s.jsx)(b,{data:B,aiSummary:V}),"po_dependency"===R&&(0,s.jsx)(N,{data:B,aiSummary:V})]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-[20px] font-semibold text-text-primary tracking-tight",children:"Smart Reports & AI Assistant"}),(0,s.jsx)("p",{className:"text-[13px] text-text-secondary mt-1",children:"PO-centric analytics with AI-powered insights"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-text-secondary glass-card px-3 py-1.5 rounded-lg",children:[(0,s.jsx)(d,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Period:"}),(0,s.jsxs)("select",{value:w,onChange:e=>S(e.target.value),className:"font-medium text-text-primary bg-transparent border-none outline-none cursor-pointer",children:[(0,s.jsx)("option",{value:"month",children:"This Month"}),(0,s.jsx)("option",{value:"quarter",children:"This Quarter"}),(0,s.jsx)("option",{value:"year",children:"This Year"})]})]})]}),(0,s.jsxs)("div",{className:"flex border-b border-border",children:[(0,s.jsx)("button",{onClick:()=>es("summary"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${"summary"===v?"border-primary text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:"Overview"}),(0,s.jsxs)("button",{onClick:()=>es("pending"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${"pending"===v?"border-amber-500 text-amber-600":"border-transparent text-text-secondary hover:text-text-primary"}`,children:["Pending Limit (",A?.pending_qty||0,")"]}),(0,s.jsx)("button",{onClick:()=>es("analysis"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${"analysis"===v?"border-purple-500 text-purple-600":"border-transparent text-text-secondary hover:text-text-primary"}`,children:"Detailed Analysis"}),(0,s.jsxs)("button",{onClick:()=>es("uninvoiced"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${"uninvoiced"===v?"border-red-500 text-red-600":"border-transparent text-text-secondary hover:text-text-primary"}`,children:["Uninvoiced DCs (",A?.alerts.uninvoiced_dcs||0,")"]})]}),"summary"===v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{className:"glass-card p-4 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-[11px] font-semibold text-text-secondary uppercase tracking-wider",children:"Efficiency"}),(0,s.jsx)("div",{className:"p-2 bg-blue-50 rounded-lg text-primary",children:(0,s.jsx)(m,{className:"w-4 h-4"})})]}),(0,s.jsxs)("h3",{className:"text-[22px] font-bold text-text-primary",children:[A.efficiency_pct,"%"]}),(0,s.jsx)("p",{className:"text-[10px] text-text-secondary mt-1",children:"dispatch rate"})]}),(0,s.jsxs)("div",{className:"glass-card p-4 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-[11px] font-semibold text-text-secondary uppercase tracking-wider",children:"Sales (YTD)"}),(0,s.jsx)("div",{className:"p-2 bg-emerald-50 rounded-lg text-emerald-600",children:(0,s.jsx)(x.DollarSign,{className:"w-4 h-4"})})]}),(0,s.jsxs)("h3",{className:"text-[22px] font-bold text-text-primary",children:["₹",(A.sales_total/1e5).toFixed(1),"L"]}),(0,s.jsx)("p",{className:"text-[10px] text-text-secondary mt-1",children:"total invoiced"})]}),(0,s.jsxs)("div",{className:"glass-card p-4 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-[11px] font-semibold text-text-secondary uppercase tracking-wider",children:"Pending Qty"}),(0,s.jsx)("div",{className:"p-2 bg-amber-50 rounded-lg text-warning",children:(0,s.jsx)(c.Package,{className:"w-4 h-4"})})]}),(0,s.jsx)("h3",{className:"text-[22px] font-bold text-text-primary",children:A.pending_qty.toLocaleString()}),(0,s.jsx)("p",{className:"text-[10px] text-text-secondary mt-1",children:"units awaiting dispatch"})]}),(0,s.jsxs)("div",{className:"glass-card p-4 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-[11px] font-semibold text-text-secondary uppercase tracking-wider",children:"Avg Lag"}),(0,s.jsx)("div",{className:"p-2 bg-purple-50 rounded-lg text-purple-600",children:(0,s.jsx)(p.Clock,{className:"w-4 h-4"})})]}),(0,s.jsx)("h3",{className:"text-[22px] font-bold text-text-primary",children:A.avg_lag_days}),(0,s.jsx)("p",{className:"text-[10px] text-text-secondary mt-1",children:"days (DC → Invoice)"})]}),(0,s.jsxs)("div",{className:"glass-card p-4 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-[11px] font-semibold text-text-secondary uppercase tracking-wider",children:"Alerts"}),(0,s.jsx)("div",{className:"p-2 bg-red-50 rounded-lg text-danger",children:(0,s.jsx)(n.AlertTriangle,{className:"w-4 h-4"})})]}),(0,s.jsx)("h3",{className:"text-[22px] font-bold text-text-primary",children:ei}),(0,s.jsxs)("p",{className:"text-[10px] text-text-secondary mt-1",children:[A.alerts.uninvoiced_dcs," uninvoiced, ",A.alerts.overdue_pos," overdue"]})]})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center",children:(0,s.jsx)(d,{className:"w-4 h-4 text-emerald-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-[16px] font-semibold text-text-primary",children:"Instant Data Summaries"}),(0,s.jsxs)("p",{className:"text-[12px] text-text-secondary",children:["One-click generation for current selected period (",w,")"]})]})]}),(0,s.jsxs)("button",{onClick:()=>{let{start:e,end:t}=ea(w);el("po",e,t)},className:"p-4 border border-border rounded-xl hover:bg-emerald-50 hover:border-emerald-200 transition-all text-left group",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"p-2 bg-gray-100 group-hover:bg-white rounded-lg transition-colors",children:(0,s.jsx)(l.FileText,{className:"w-5 h-5 text-gray-600 group-hover:text-emerald-600"})}),(0,s.jsx)("span",{className:"font-semibold text-gray-700 group-hover:text-emerald-700",children:"PO Summary"})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["View Purchase Orders created in this ",w]})]}),(0,s.jsxs)("button",{onClick:()=>{let{start:e,end:t}=ea(w);el("challan",e,t)},className:"p-4 border border-border rounded-xl hover:bg-emerald-50 hover:border-emerald-200 transition-all text-left group",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"p-2 bg-gray-100 group-hover:bg-white rounded-lg transition-colors",children:(0,s.jsx)(c.Package,{className:"w-5 h-5 text-gray-600 group-hover:text-emerald-600"})}),(0,s.jsx)("span",{className:"font-semibold text-gray-700 group-hover:text-emerald-700",children:"DC Summary"})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Track delivery challans in this ",w]})]}),(0,s.jsxs)("button",{onClick:()=>{let{start:e,end:t}=ea(w);el("invoice",e,t)},className:"p-4 border border-border rounded-xl hover:bg-emerald-50 hover:border-emerald-200 transition-all text-left group",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"p-2 bg-gray-100 group-hover:bg-white rounded-lg transition-colors",children:(0,s.jsx)(x.DollarSign,{className:"w-5 h-5 text-gray-600 group-hover:text-emerald-600"})}),(0,s.jsx)("span",{className:"font-semibold text-gray-700 group-hover:text-emerald-700",children:"Invoice Summary"})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Financial overview for this ",w]})]})]}),G&&(0,s.jsxs)("div",{className:"flex items-center justify-center py-12 mt-6",children:[(0,s.jsx)(o.Loader2,{className:"w-6 h-6 animate-spin text-primary"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-text-muted",children:"Generating Report..."})]}),!G&&K&&(0,s.jsxs)("div",{className:"mt-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:["po"===J&&(0,s.jsx)(P,{data:K}),"challan"===J&&(0,s.jsx)(k,{data:K}),"invoice"===J&&(0,s.jsx)(C,{data:K})]})]}),"analysis"===v&&(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-1 space-y-2",children:[(0,s.jsx)("h3",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-3 px-1",children:"Analysis Type"}),(0,s.jsxs)("button",{onClick:()=>er("po_health"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all ${"po_health"===R?"bg-primary text-white shadow-md":"bg-white hover:bg-gray-50 text-text-primary border border-transparent"}`,children:[(0,s.jsx)(g,{className:"w-4 h-4"})," PO Health Check","po_health"===R&&(0,s.jsx)("div",{className:"ml-auto w-1.5 h-1.5 bg-white rounded-full animate-pulse"})]}),(0,s.jsxs)("button",{onClick:()=>er("po_aging"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all ${"po_aging"===R?"bg-primary text-white shadow-md":"bg-white hover:bg-gray-50 text-text-primary border border-transparent"}`,children:[(0,s.jsx)(p.Clock,{className:"w-4 h-4"})," Delay & Aging"]}),(0,s.jsxs)("button",{onClick:()=>er("po_efficiency"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all ${"po_efficiency"===R?"bg-primary text-white shadow-md":"bg-white hover:bg-gray-50 text-text-primary border border-transparent"}`,children:[(0,s.jsx)(c.Package,{className:"w-4 h-4"})," Fulfillment Efficiency"]}),(0,s.jsxs)("button",{onClick:()=>er("po_dependency"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all ${"po_dependency"===R?"bg-primary text-white shadow-md":"bg-white hover:bg-gray-50 text-text-primary border border-transparent"}`,children:[(0,s.jsx)(y.BarChart3,{className:"w-4 h-4"})," Dependency Analysis"]})]}),(0,s.jsx)("div",{className:"lg:col-span-3",children:z?(0,s.jsxs)("div",{className:"glass-card h-96 flex flex-col items-center justify-center",children:[(0,s.jsx)(o.Loader2,{className:"w-10 h-10 animate-spin text-primary mb-4"}),(0,s.jsx)("p",{className:"text-text-secondary",children:"Analyzing Data with AI..."})]}):B?(0,s.jsxs)("div",{className:"animate-in fade-in duration-300",children:["po_health"===R&&(0,s.jsx)(u,{data:B,aiSummary:V}),"po_aging"===R&&(0,s.jsx)(j,{data:B,aiSummary:V}),"po_efficiency"===R&&(0,s.jsx)(b,{data:B,aiSummary:V}),"po_dependency"===R&&(0,s.jsx)(N,{data:B,aiSummary:V})]}):(0,s.jsxs)("div",{className:"glass-card h-64 flex flex-col items-center justify-center text-center p-8",children:[(0,s.jsx)("div",{className:"p-4 bg-blue-50 rounded-full mb-4",children:(0,s.jsx)(y.BarChart3,{className:"w-8 h-8 text-blue-500"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-text-primary",children:"Select an Analysis"}),(0,s.jsx)("p",{className:"text-text-secondary mt-2 max-w-sm",children:"Choose a report type from the sidebar to view detailed analytics and AI insights."})]})})]}),"pending"===v&&(0,s.jsxs)("div",{className:"glass-card p-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-border bg-gray-50/50",children:(0,s.jsxs)("h3",{className:"font-semibold text-text-primary flex items-center gap-2",children:[(0,s.jsx)(n.AlertTriangle,{className:"w-4 h-4 text-warning"}),"Pending PO Items"]})}),(0,s.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,s.jsx)("thead",{className:"bg-surface-2 text-text-secondary font-medium border-b border-border",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3",children:"PO Number"}),(0,s.jsx)("th",{className:"px-4 py-3",children:"Item"}),(0,s.jsx)("th",{className:"px-4 py-3",children:"Description"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Ordered"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Dispatched"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right text-danger font-semibold",children:"Pending"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Age"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-border/50",children:[D.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-4 py-3 font-medium text-primary",children:e.po_number}),(0,s.jsx)("td",{className:"px-4 py-3 text-text-secondary",children:e.po_item_no}),(0,s.jsx)("td",{className:"px-4 py-3 text-text-primary",children:e.material_description}),(0,s.jsx)("td",{className:"px-4 py-3 text-right text-text-secondary",children:e.ord_qty}),(0,s.jsx)("td",{className:"px-4 py-3 text-right text-text-secondary",children:e.dispatched_qty}),(0,s.jsx)("td",{className:"px-4 py-3 text-right font-bold text-danger bg-red-50/50",children:e.pending_qty}),(0,s.jsxs)("td",{className:"px-4 py-3 text-right text-text-muted",children:[e.age_days," days"]})]},t)),0===D.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"px-4 py-8 text-center text-text-muted",children:"No pending items found."})})]})]})]}),"uninvoiced"===v&&(0,s.jsxs)("div",{className:"glass-card p-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-border bg-gray-50/50",children:(0,s.jsxs)("h3",{className:"font-semibold text-text-primary flex items-center gap-2",children:[(0,s.jsx)(n.AlertTriangle,{className:"w-4 h-4 text-danger"}),"Uninvoiced Delivery Challans"]})}),(0,s.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,s.jsx)("thead",{className:"bg-surface-2 text-text-secondary font-medium border-b border-border",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3",children:"DC Number"}),(0,s.jsx)("th",{className:"px-4 py-3",children:"Date"}),(0,s.jsx)("th",{className:"px-4 py-3",children:"PO Number"}),(0,s.jsx)("th",{className:"px-4 py-3",children:"Consignee"}),(0,s.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Action"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-border/50",children:[$.map((t,a)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-4 py-3 font-medium text-purple-600",children:t.dc_number}),(0,s.jsx)("td",{className:"px-4 py-3 text-text-secondary",children:t.dc_date}),(0,s.jsx)("td",{className:"px-4 py-3 text-primary hover:underline cursor-pointer",children:t.po_number}),(0,s.jsx)("td",{className:"px-4 py-3 text-text-primary",children:t.consignee_name}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"Pending Invoice"})}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:(0,s.jsx)("button",{onClick:()=>e.push(`/invoice/create?dc=${t.dc_number}`),className:"px-3 py-1 bg-primary text-white text-xs font-medium rounded hover:bg-blue-700 transition-colors",children:"Generate Invoice"})})]},a)),0===$.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-4 py-8 text-center text-text-muted",children:"All challans have been invoiced."})})]})]})]})]})}function O(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)(o.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}),children:(0,s.jsx)(A,{})})}e.s(["default",()=>O],4278)}]);